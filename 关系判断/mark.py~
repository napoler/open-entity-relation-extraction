#encoding=utf-8
from kg_lvdb import KgDatabase
from albert_pytorch import classify

kg=KgDatabase()
i=0
tclass=classify(model_name_or_path='/mnt/data/dev/github/albert_pytorch/albert_pytorch/albert_chinese_pytorch/outputs/terry_rank_output')
for key,item in kg.get_unmarked():


    s=item['sentence']
    for w in item['kg']:
        # p=s.find(w)
        # if p>=0:
        s=s.replace(w,"<<"+w+">>")



    # print( tclass.pre(item['sentence']))
    if int(tclass.pre(item['sentence']))==0:
        print("Ai预测：No(1)")
#        print(key)
        pass
    elif int(tclass.pre(item['sentence']))==1:
        print("Ai预测：Yes(2)")

    print("#################标记数据######")
    print("本次已经标注：",i)
    print(key)
    print("句子：",s)
    print("知识：",item['kg'])


    # print("输入1(No)或者2(Yes)")
    x = input("输入1(No)或者2(Yes) 默认1:")
    # print
    try:
        x= int(x)
    except:
        pass
        x=1
    if x==1:
        print("选择No")
    else:
        print("选择Yes")
    data=item
    data["label"]=x
    kg.mark_sentence(key,data)
    i=i+1
    # exit()

